/* ==============================================================
   FONTS
============================================================== */
@import url("https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");

/* ==============================================================
   TAILWIND CORE
============================================================== */
@import "tailwindcss";

/* ==============================================================
   DESIGN TOKENS – CINESCOPE
============================================================== */
@theme {
  /* ===== COLORS ===== */
  --color-cine-bg: #0b0d17;
  --color-cine-surface: #111421;
  --color-cine-text: #f5f5f5;
  --color-cine-muted: #9ca3af;
  --color-cine-accent: #2a39ff;
  --color-cine-highlight: #00d8ff;
  --color-cine-scope: #6d28d9;
  --color-cine-overlay: rgba(11, 13, 23, 0.75);

  /* Legacy */
  --color-dark-100: var(--color-cine-bg);
  --color-light-100: #cecefb;
  --color-gray-100: var(--color-cine-muted);

  /* ===== GRADIENTS ===== */
  --gradient-cine-primary: linear-gradient(to right, #97efff, #00d8ff);
  --gradient-cine-subtle: linear-gradient(
    to top,
    rgba(11, 13, 23, 0.95),
    rgba(11, 13, 23, 0.2)
  );

  /* ===== TYPOGRAPHY ===== */
  --font-heading: "Bebas Neue", sans-serif;
  --font-body: "Inter", sans-serif;

  --font-size-hero-mobile: 2.5rem;
  --font-size-hero-desktop: 4.5rem;

  --font-size-subtitle-mobile: 1.125rem;
  --font-size-subtitle-desktop: 1.5rem;

  /* ===== BREAKPOINTS ===== */
  --breakpoint-xs: 480px;

  /* ===== SHADOWS ===== */
  --shadow-glow: 0 0 25px rgba(0, 216, 255, 0.15);
  --shadow-soft: 0 4px 15px rgba(0, 0, 0, 0.2);

  /* ===== RADIUS ===== */
  --radius-card: 1rem;
}

/* ==============================================================
   BASE STYLES
============================================================== */
@layer base {
  body {
    font-family: var(--font-body);
    background-color: var(--color-cine-bg);
    color: var(--color-cine-text);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  h1 {
    @apply max-w-4xl text-center font-bold leading-tight tracking-[-1%] text-cine-text text-5xl sm:text-[64px] sm:leading-[76px];
  }

  h2 {
    @apply text-2xl font-bold text-cine-text sm:text-3xl;
  }

  main {
    @apply min-h-screen relative bg-cine-bg overflow-hidden;
  }

  button {
    @apply cursor-pointer;
  }
}

/* ==============================================================
  HEADER OVERLAY
============================================================== */

.header-overlay {
  @apply absolute inset-0 pointer-events-none;
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.38) 0%,
    rgba(0, 0, 0, 0.22) 40%,
    rgba(0, 0, 0, 0) 100%
  );
}

/* ==============================================================
   HERO SYSTEM — Apple TV Style
============================================================== */
@layer components {
  .hero-container {
    @apply relative w-full overflow-hidden z-0;

    /* AppleTV-style responsive height uses:
       - Use min( calc(90vh - 64px), 175vw )
       - 64px = your header height
    */

    height: min(120vh, 175vw);
  }

  /* Laptops / tablets */
  @media (max-width: 1200px) {
    .hero-container {
      height: min(100vh, 190vw);
    }
  }

  /* Phones */
  @media (max-width: 800px) {
    .hero-container {
      height: min(95vh, 210vw);
    }
  }

  .hero-actions {
    @apply mt-6 flex flex-wrap items-center gap-3;
    @apply sm:mt-6 sm:flex-row sm:items-center sm:gap-4;
  }

  .hero-btn {
    @apply inline-flex items-center justify-center gap-2
    rounded-full px-5 py-2.5
    text-xs font-semibold
    smooth-transition
    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent;
    @apply sm:px-6 sm:py-2.5 sm:text-sm lg:text-base;
  }

  .hero-subtitle {
    @apply text-xs sm:text-sm md:text-base lg:text-lg text-white/80 leading-relaxed;
  }

  .hero-btn-icon {
    @apply text-sm sm:text-base lg:text-lg;
  }

  /* Play Now – matches "Cine" side (blue / cyan) */
  .hero-btn-primary {
    background-image: linear-gradient(to right, #97efff, #00d8ff);
    color: #0b0d17; /* dark bg color so the text pops */
    box-shadow: var(--shadow-soft);
  }

  .hero-btn-primary:hover {
    transform: translateY(-1px) scale(1.02);
    box-shadow: 0 8px 24px rgba(0, 216, 255, 0.35);
  }

  /* Watch Trailer – matches "Scope" side (purple) */
  .hero-btn-secondary {
    background-image: linear-gradient(to right, #d6c7ff, #ab8bff);
    color: #0b0d17;
    box-shadow: var(--shadow-soft);
  }

  .hero-btn-secondary:hover {
    transform: translateY(-1px) scale(1.02);
    box-shadow: 0 8px 24px rgba(171, 139, 255, 0.35);
  }

  /* + Add – subtle gray outline pill */
  .hero-btn-tertiary {
    @apply border border-cine-muted/60
    bg-transparent
      text-cine-text
      flex items-center justify-center
      w-9 h-9 sm:w-11 sm:h-11 p-0;
  }

  .hero-btn-tertiary:hover {
    background-color: rgba(156, 163, 175, 0.15); /* cine-muted-ish */
    transform: translateY(-1px);
  }

  .hero-title {
    @apply text-left mb-4;
    font-family: var(--font-heading);
    font-size: clamp(3.2rem, 7vw, 6.8rem);
    line-height: 1.05;
  }

  .hero-bg {
    @apply absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat transition-all duration-500;
    z-index: 0;

    /* Shifts artwork upward on mobile like Apple TV */
    @media (max-width: 739px) {
      object-position: center 30%;
    }
  }

  .hero-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-[#0B0D17]/95 via-[#0B0D17]/60 to-transparent;
    z-index: 1;
  }

  .hero-content {
    @apply relative z-10 flex flex-col px-0 sm:px-6
    max-h-[70vh] overflow-y-auto sm:max-h-none sm:overflow-visible;
    padding-top: clamp(4rem, 14vh, 7rem);
    font-size: clamp(0.9rem, 1.15vw, 1.1rem);
  }

  .hero-pill {
    @apply inline-flex items-center px-3 py-1 rounded-full
    bg-black/40 border border-white/10
    text-[0.7rem] sm:text-xs font-medium text-cine-text/80;
    backdrop-filter: blur(4px);
  }

  .hero-overview {
    @apply text-cine-text/80 leading-relaxed line-clamp-4;
  }
}

/* ============================================
   NEW RESPONSIVE CARD SYSTEM USING RATIOS
=============================================== */

/* Wrapper height still supports growth */
.carousel-row {
  @apply flex flex-row items-center justify-center mx-3 gap-3
  overflow-x-auto hide-scrollbar snap-x snap-mandatory
   xl:h-150
  lg:h-150
  md:h-120
  h-100;

  /* Desktop/laptop: keep the original centered layout (no extra edge padding). */
  justify-content: center;
  padding-inline: 0;
  scroll-padding-inline: 0;

  /* Prevent vertical clipping when cards scale up */
  overflow-y: visible;
}

/* This section contains the carousel; allow scaled cards to breathe */
.trending-section {
  overflow: visible;
}

/* ------- INACTIVE CARDS ------- */
.carousel-card {
  @apply relative rounded-xl overflow-hidden cursor-pointer shadow-lg snap-center
  transition-all duration-300 ease-out;
  flex-shrink: 0;
  transform-origin: bottom center;

  /* Default: big desktop (looks like your current 1280px shot) */
  width: min(22vw, 230px);
  aspect-ratio: 1 / 2.2;
}

/* When viewport gets tighter (< 1200px), shrink card width
   so 5 cards + gaps always fit without clipping the first one */
@media (max-width: 1200px) {
  .carousel-card {
    width: min(18vw, 210px); /* slightly narrower, same tall vibe */
  }
}

/* ------- ACTIVE CARDS ------- */
.carousel-card.active {
  @apply z-20 scale-110;

  /* Big desktop */
  width: calc(min(22vw, 230px) * 1.15);
  aspect-ratio: 1 / 1.9;
  flex-shrink: 0;
}

/* Match the mid-desktop tweak for active cards too */
@media (max-width: 1200px) {
  .carousel-row {
    height: 555px;
  }

  .carousel-card.active {
    width: calc(min(19vw, 210px) * 1.15);
  }
}

/* Ghost spacers removed (padding handles edges now) */

/* Images always fill */
.carousel-card img {
  @apply w-full h-full object-cover;
}

/* ============ SMALLER SCREENS OVERRIDES ============ */

/* Small tablets / big phones (≤ 768px) */
@media (max-width: 768px) {
  /* Let the row size naturally on small screens.
     We scale the active card via transform (visual) rather than changing its layout size,
     which avoids clipping + removes the need for brittle fixed heights. */
  .carousel-row {
    /* Mobile: prevent left-edge clipping when using snap-center.
     JS sets --carousel-edge-padding based on the active card width. */
    justify-content: flex-start;
    padding-inline: var(--carousel-edge-padding, 0px);
    scroll-padding-inline: var(--carousel-edge-padding, 0px);

    --carousel-card-w: clamp(110px, 32vw, 170px);
    height: auto !important;
    /* Give the row enough *layout* height to contain the scaled active card.
       (Transforms don't affect layout, so without this the card can overlap below.) */
    min-height: calc(var(--carousel-card-w) * 2.3 + 92px);
    align-items: flex-end;
    /* Important: transformed (scaled) cards don't affect layout height.
     Give the row vertical breathing room and ensure Y overflow isn't clipped. */
    overflow-y: visible;
    padding-top: 44px;
    padding-bottom: 44px;
  }

  /* Bigger, more consistent cards on ~360px wide phones */
  .carousel-card {
    width: var(--carousel-card-w);
    /* Slightly less tall than desktop so the active state doesn't dominate mobile */
    aspect-ratio: 1 / 2.1;
  }

  .carousel-card.active {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 2.1;
    transform: translateY(-6px) scale(1.05);
  }

  .snap-spacer {
    width: clamp(56px, 14vw, 96px); /* noticeably bigger on small screens */
  }

  .snap-spacer-right {
    width: 1vw;
  }
}

@media (max-width: 608px) {
  .carousel-row {
    --carousel-card-w: clamp(110px, 34vw, 165px);
    min-height: calc(var(--carousel-card-w) * 2.25 + 90px);
  }

  .carousel-card {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 2.05;
  }

  .carousel-card.active {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 2.05;
    transform: translateY(-6px) scale(1.05);
  }
  .snap-spacer-right {
    width: 1vw;
  }
}

/* Small phones (≤ 480px) */
@media (max-width: 480px) {
  .carousel-row {
    --carousel-card-w: clamp(110px, 38vw, 155px);
    min-height: calc(var(--carousel-card-w) * 2.2 + 88px);
  }

  .carousel-card {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 2;
  }

  .carousel-card.active {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 2;
    transform: translateY(-5px) scale(1.05);
  }
  .snap-spacer-right {
    width: 1vw;
  }
}

@media (max-width: 300px) {
  .carousel-row {
    --carousel-card-w: clamp(92px, 44vw, 140px);
    min-height: calc(var(--carousel-card-w) * 2.1 + 72px);
  }

  .carousel-card {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 1.95;
  }

  .carousel-card.active {
    width: var(--carousel-card-w);
    aspect-ratio: 1 / 1.95;
    transform: translateY(-4px) scale(1.04);
  }
  .snap-spacer-right {
    width: 0.5vw;
  }
}

/* ==============================================================
   SEARCH BAR — CLEAN FLAT HEADER STYLE
============================================================== */
@layer components {
  .search {
    @apply flex items-center
      w-full max-w-[180px] sm:max-w-[220px]   /* smaller + fits header better */
      h-8                                      /* consistent visible height */
      bg-white/12                              /* subtle, readable always */
      border border-white/20                   /* faint outline for clarity */
      rounded-md                               
      px-2
      transition-all duration-200;
  }

  /* Mobile menu version – full width, beefier, more padding */
  .mobile-menu-overlay .search {
    @apply max-w-full      /* no width cap */
    h-10            /* a little taller */
    px-4; /* more breathing room */
  }

  .search:hover {
    @apply bg-white/20 border-white/30;
  }

  .search:focus-within {
    @apply bg-white/25 border-white/40 shadow-[0_0_6px_rgba(255,255,255,0.25)];
  }

  .search div {
    @apply relative flex items-center w-full;
  }

  .search img {
    @apply absolute
    left-3           /* a bit more inset from left edge */
    top-1/2
    -translate-y-1/2
    h-4 w-4
    opacity-80;
  }

  .search input {
    @apply w-full
      bg-transparent
      pl-9 pr-2
      text-[0.8rem] sm:text-sm
      text-white
      placeholder-white/60
      outline-hidden;
  }
}

/* ==============================================================
   MOVIE GRID & CARDS (for future sections)
============================================================== */
@layer components {
  .all-movies {
    @apply space-y-9 px-4 sm:px-0;

    & ul {
      @apply grid grid-cols-1 gap-5 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4;
    }
  }

  .movie-card {
    @apply bg-cine-bg p-5 rounded-2xl shadow-inner shadow-cine-highlight/10;

    & img {
      @apply rounded-lg h-auto w-full;
    }

    & h3 {
      @apply text-cine-text font-bold text-base line-clamp-1;
    }

    & .content {
      @apply mt-2 flex flex-row items-center flex-wrap gap-2;
    }

    & .rating {
      @apply flex flex-row items-center gap-1;
    }

    & .rating img {
      @apply size-4 object-contain;
    }

    & .rating p {
      @apply font-bold text-base text-cine-text;
    }

    & .content span,
    & .content .lang,
    & .content .year {
      @apply text-sm text-cine-muted font-medium;
    }
  }
}

/* ==============================================================
   UTILITIES
============================================================== */
@utility text-gradient-cine {
  background: var(--gradient-cine-primary);
  -webkit-background-clip: text;
  color: transparent;
}

@utility fancy-text {
  -webkit-text-stroke: 5px rgba(206, 206, 251, 0.5);
  font-size: 190px;
  font-family: "Bebas Neue", sans-serif;
}

@utility text-gradient-1 {
  @apply bg-linear-to-r from-[#97EFFF] to-[#00D8FF] bg-clip-text text-transparent;
}

@utility text-gradient-2 {
  @apply bg-linear-to-r from-[#D6C7FF] to-[#AB8BFF] bg-clip-text text-transparent;
}

@utility bg-gradient-scope {
  @apply bg-linear-to-r from-[#D6C7FF] to-[#AB8BFF];
}

@utility hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

@utility smooth-transition {
  @apply transition-all duration-300 ease-in-out;
}

@utility glow-border {
  box-shadow: 0 0 10px rgba(0, 216, 255, 0.3);
}

@utility shadow-soft {
  box-shadow: var(--shadow-soft);
}

@utility overlay-cine {
  @apply absolute inset-0 bg-gradient-to-t from-[#0B0D17]/95 via-[#0B0D17]/50 to-transparent;
}

@utility hero-heading {
  font-family: var(--font-heading);
  font-size: var(--font-size-hero-mobile);
  line-height: 1.1;
  color: var(--color-cine-text);

  @media (min-width: 768px) {
    font-size: var(--font-size-hero-desktop);
  }
}

@utility subtitle {
  font-family: var(--font-body);
  font-size: var(--font-size-subtitle-mobile);
  color: var(--color-cine-muted);

  @media (min-width: 768px) {
    font-size: var(--font-size-subtitle-desktop);
  }
}
